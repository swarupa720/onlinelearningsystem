{% load custom_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ course.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <div class="card shadow p-4">
        <h2 class="text-primary mb-3">Course: {{ course.title }}</h2>

        <!-- Progress Info -->
        <div class="mb-3">
            <p class="mb-1"><strong>Progress:</strong> {{ progress_percent }}%</p>
            <div class="progress" style="height: 25px;">
                <div class="progress-bar progress-bar-striped bg-success" 
                     role="progressbar" 
                     style="width: {{ progress_percent }}%;" 
                     aria-valuenow="{{ progress_percent }}" 
                     aria-valuemin="0" 
                     aria-valuemax="100">
                    {{ progress_percent }}%
                </div>
            </div>
        </div>

        <!-- Lesson List -->
        <h4 class="mb-3 mt-4">Lessons</h4>
        <ul class="list-group">
            {% for lesson in lessons %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a href="{% url 'courses:lesson-detail' lesson.id %}" class="text-decoration-none fw-semibold">
                        {{ lesson.title }}
                    </a>
                    {% if completed_ids|id_in_list:lesson.id %}
                        <span class="badge bg-success">✅ Completed</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">❌ Incomplete</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
</div>

</body>
</html>
