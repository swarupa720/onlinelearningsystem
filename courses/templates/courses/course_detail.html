{% load custom_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ course.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <div class="card shadow p-4 mb-4">
        <h1 class="mb-3 text-primary">{{ course.title }}</h1>

        <div class="row mb-3">
            <div class="col">
                <span class="badge bg-secondary me-2">Total Lessons: {{ total }}</span>
                <span class="badge bg-success me-2">Completed: {{ completed }}</span>
                <span class="badge bg-info text-dark">Progress: {{ progress_percent }}%</span>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress mb-4" style="height: 25px;">
            <div class="progress-bar progress-bar-striped bg-success" 
                 role="progressbar" 
                 style="width: {{ progress_percent }}%;" 
                 aria-valuenow="{{ progress_percent }}" 
                 aria-valuemin="0" 
                 aria-valuemax="100">
                {{ progress_percent }}%
            </div>
        </div>

        <!-- Lesson List -->
        <h4 class="mb-3">Lessons</h4>
        <ul class="list-group">
            {% for lesson in lessons %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a href="{% url 'courses:lesson-detail' lesson.id %}" class="text-decoration-none fw-semibold">
                        {{ lesson.title }}
                    </a>
                    {% if lesson.id|id_in_list:completed_ids %}
                        <span class="badge bg-success">✅ Completed</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">❌ Incomplete</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
</div>

</body>
</html>
